<nav class="navbar navbar-expand-lg sticky-top">
  <div class="container-fluid">
    <%= link_to image_tag("logos/black_footer", width: "250", height: "30"), root_path %>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Door Step Service</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <%if user_signed_in?%>
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-center flex-grow-1 pe-3">
            <li class="nav-item">
              <%= link_to "Home", root_path, class: "nav-link mx-lg-2" %>
            </li>
            <li class="nav-item">
              <%= link_to "Booking History", service_requests_path, class: "nav-link mx-lg-2" %>
            </li>
            <li class="nav-item">
              <div class="nav-item d-flex align-items-center position-relative">
                <%= link_to "Cart", cart_path(current_user), class: "nav-link mx-lg-2" %>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart_count">
                  <%= cart_count%>
                </span>
              </div>
            </li>
          </ul>
        </div>
      <% end %>
    </div>
    <% if !user_signed_in?%>
      <%= link_to "Login", new_user_session_path, class: "login-btn" %>
      <%= link_to "Signup", new_user_registration_path, class: "login-btn" %>
    <% else %>
      <%= image_tag('logos/user_icon', size: '30x30', class: "me-2") %>
      <h4 class="me-2 mt-2"><%= current_user.name %></h4>
      <%= link_to "Profile", edit_user_registration_path, class: "login-btn" %>
      <%= button_to "Log Out", destroy_user_session_path, method: :delete, class: "login-btn" %>
    <% end %>
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>